{% extends 'personalarea/base.html' %}
{% block content %}
{% load static %}
{{ task_context|json_script:"tasks_json" }}
      <div class="cont" id="app4">
        <select v-model="selectedPerformer">
            <option v-for="performer in performers" v-bind:value="performer">[[ performer.lastname ]] [[ performer.firstname ]] [[ performer.patronymic ]]</option>
            <option>Все</option>
        </select>

        <select v-model="selectedStatus">
            <option>Запланирована</option>
            <option>Исполняется</option>
            <option>Выполнена</option>
            <option>Отменена</option>
            <option>Все</option>
        </select>

        <div v-for="task in tasks">
            <div v-if="performers.length > 0">
                <div v-for="performer in performers" v-if="task.taskperformer === performer.login">
                    <div v-if="selectedPerformer === 'Все' && selectedStatus === 'Все' || selectedPerformer.login === performer.login && selectedStatus === task.taskstatus">
                        <a><button class="Button TaskButton">
                            <table>
                                <tr>
                                    <td class="Task">[[ task.taskname ]]</td>
                                    <td class="Status">[[ task.taskstatus ]]</td>
                                </tr>
                                <tr>
                                    <td class="User">Исполнитель: [[ performer.lastname ]] [[ performer.firstname ]] [[ performer.patronymic ]] </td>
                                </tr>
                                <tr>
                                    <td class="User">Менеджер: [[ manager ]] </td>
                                </tr>
                            </table>
                        </button></a>
                    </div>
                    <div v-else-if="selectedPerformer.login === performer.login && selectedStatus === 'Все' || selectedPerformer === 'Все' && selectedStatus === task.taskstatus">
                        <a><button class="Button TaskButton">
                            <table>
                                <tr>
                                    <td class="Task">[[ task.taskname ]]</td>
                                    <td class="Status">[[ task.taskstatus ]]</td>
                                </tr>
                                <tr>
                                    <td class="User">Исполнитель: [[ performer.lastname ]] [[ performer.firstname ]] [[ performer.patronymic ]] </td>
                                </tr>
                                <tr>
                                    <td class="User">Менеджер: [[ manager ]] </td>
                                </tr>
                            </table>
                        </button></a>
                    </div>   
             
                </div>
            </div>

            <div v-else>
                <a><button class="Button TaskButton">
                    <table>
                        <tr>
                            <td class="Task">[[ task.taskname ]]</td>
                            <td class="Status">[[ task.taskstatus ]]</td>
                        </tr>
                        <tr>
                            <td class="User">Исполнитель: [[ performers.lastname ]] [[ performers.firstname ]] [[ performers.patronymic ]] </td>
                        </tr>
                        <tr>
                            <td class="User">Менеджер: [[ manager ]] </td>
                        </tr>
                    </table>
                </button></a>
            </div>
        </div>
      </div>

      <script src="{% static "js/task.vue.js" %}"></script>
{% endblock %}